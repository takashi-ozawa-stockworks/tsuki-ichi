# Tsuki-Ichi (ツキイチ)

**「毎日のレシート入力」から解放される、個人開発の家計簿アプリ。**

Tsuki-Ichiは、日々の細かい支出履歴（Flow）を追うことをやめ、「月単位の収支」と「資産残高（Stock）」の定点観測に特化した、ミニマルな資産管理ツールです。

## 💡 コンセプト

* **毎日の入力からの解放 (No More Daily Inputs)**
    * コンビニで買ったジュースや日々の買い物を記録する必要はありません。
* **月イチの一括入力 (Monthly Batch)**
    * 月に一度、クレジットカードの明細や銀行残高を見て、まとめて「今月の合計」を入力するだけです。
* **収支(PL)と資産(BS)の分離**
    * 「いくら使ったか（収支）」と「いくら持っているか（資産）」を独立して管理します。使途不明金があっても気にしません。
* **モバイルファースト**
    * スマホのブラウザからサクサク入力・閲覧できるUI設計です。

## 🛠 技術スタック

コストをかけず、モダンな開発体験を重視した構成です。

* **Frontend:** SvelteKit (TypeScript)
* **Database:** Supabase (PostgreSQL)
* **Styling:** Tailwind CSS
* **Deployment:** Vercel (Hobbyプラン)

## 📱 機能一覧 (Features)

### 1. ダッシュボード (Dashboard)
アプリを開いてすぐに「今の財務状況」を診断します。
* **総資産サマリー:** 全口座の合計金額を表示。
* **財務健全性分析:**
    * **支出トレンド:** 過去の平均支出と比較し、「使いすぎ」か「節約中」かを判定。
    * **変動要因分析:** 先月と比較して、最も支出が増えた（または減った）カテゴリーを特定。
* **資産成長トラッキング:**
    * **前月比:** 資産の増減額と成長率(%)を表示。
    * **マイルストーン:** 「次の100万円」の大台に乗るまでの進捗バーを表示。
* **グラフ可視化:** 支出の内訳と資産ポートフォリオを円グラフで表示。

### 2. 一括入力機能 (Batch Input)
Excelのようなリスト形式で、数値を直接入力・編集します。
* **ストレスフリーなUI:** スマホでもPCでも操作しやすいレスポンシブ設計。
* **カレンダーピッカー:** 過去の月への移動がスムーズに行えます。
* **入力サポート:** 自動カンマ区切り表示、バリデーション、トースト通知による操作フィードバック。
* **常駐保存ボタン:** スクロールしても常に画面下部に保存ボタンを表示。

### 3. 設定 (Settings)
* **カテゴリー・口座管理:** 費目や口座の追加・削除。重複チェック機能付き。
* **開発者用ツール (Dev Modeのみ):**
    * **ダミーデータ生成:** ワンクリックで「1年分のランダムな収支・資産データ」を生成し、グラフの動作確認が可能。
    * **全データ削除:** データをリセットする機能。

## 🗄 データベース設計

このアプリは、一般的な家計簿アプリのような「取引履歴（Transactions）」テーブルを持ちません。
代わりに「月ごとのスナップショット」を保存します。

### マスタテーブル
* `categories`: 費目マスタ (Type: 収入 / 支出)
* `accounts`: 口座マスタ (Type: 現金 / 銀行 / 証券 など)

### 実績テーブル (月次スナップショット)
* `monthly_category_values`: **PL (損益)**
    * ある月(Year/Month)の、あるカテゴリー(Category)の合計金額。
* `monthly_account_balances`: **BS (資産)**
    * ある月(Year/Month)の、ある口座(Account)の月末残高。

## 🚀 開発の始め方

### 前提条件
* Node.js がインストールされていること
* Supabase のアカウントがあり、プロジェクトを作成済みであること

### セットアップ手順

1.  **リポジトリのクローン**
    ```bash
    git clone https://github.com/takashi-ozawa-stockworks/tsuki-ichi.git
    cd tsuki-ichi
    ```

2.  **依存関係のインストール**
    ```bash
    npm install
    ```

3.  **環境変数の設定**
    ルートディレクトリに `.env` ファイルを作成し、Supabaseのキーを設定してください。
    ```env
    PUBLIC_SUPABASE_URL=your_supabase_project_url
    PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
    SUPABASE_SERVICE_ROLE_KEY=your_supabase_secret_key
    ```

4.  **ローカルサーバーの起動**
    ```bash
    npm run dev
    ```

## License

This project is for personal use.
